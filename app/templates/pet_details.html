{% extends 'base.html' %}
{% block title %}Adoptify - {{ pet.name }}{% endblock %}
{% block content %}

  <div class="pet-details">

    <figure class="pet-image">
       <img src="{{ url_for('static', filename='bilder/' ~ pet['image']) }}" alt="{{ pet.name}}">
    </figure>

    <section class="pet-info">
      <a href="{{ url_for('index') }}" class="card-link">Zurück zur Übersicht</a>

      <h1>{{ pet.name }}</h1>
      <p><strong>Tierart:</strong> {{ pet.animal_type }}</p>
      <p><strong>Beschreibung:</strong> {{ pet.description }}</p>
      <p><strong>Besitzer-ID:</strong> {{ pet.owner_id }}</p>

      {% if not pet.is_borrowed %}
        <p>Status: <b>Verfügbar</b></p>
        
        {% if session['user_id'] %}
          <!-- Anzeigen wenn aktueller User nicht Besitzer ist -->
          {% if pet.owner_id != session['user_id'] %}
            <a href="/pet/{{ pet.pet_id }}/borrow" class="card-link">Ausleihen</a>
          {% endif %}
        {% endif %}

      {% else %}
        <p>Status: <b>Verliehen</b></p>

        <!-- Nur der aktuelle Ausleiher kann auch zurückgeben -->
         {% if pet.borrower_id == session['user_id'] %}
          <a href="/pet/{{ pet.pet_id }}/return" class="card-link">Zurückgeben</a>
         {% endif %}

      {% endif %}

      <!--Bearbeiten nur Anzeigen wenn user = owner-->
      {% if pet.owner_id == session['user_id'] %}
        <a href="/pet/{{ pet.pet_id }}/edit" class="card-link">Bearbeiten</a>
      {% endif %}

    </section>

  </div>

{% endblock %}